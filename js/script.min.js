var menu=document.getElementById("dropdown-menu"),toggleMenu=document.getElementById("dropdown-menu-toggle");toggleMenu.addEventListener("focus",function(e){"dropdown-menu flex-column active"===menu.className?menu.className="dropdown-menu flex-column visually-hidden":menu.className="dropdown-menu flex-column active"},!0),toggleMenu.addEventListener("focusout",function(e){"dropdown-menu flex-column active"===menu.className?menu.className="dropdown-menu flex-column visually-hidden":menu.className="dropdown-menu flex-column active"},!0),menu.addEventListener("focus",function(e){menu.className="dropdown-menu flex-column active"},!0),menu.addEventListener("focusout",function(e){menu.className="dropdown-menu flex-column visually-hidden"},!0);for(var navLinks=document.getElementsByClassName("site-navigation-link"),linksBg=document.getElementsByClassName("link-bg"),i=0;i<navLinks.length;i++)navLinks[i].addEventListener("focus",function(){this.parentNode.classList.add("focus")},!0);for(i=0;i<navLinks.length;i++)navLinks[i].addEventListener("focusout",function(){this.parentNode.classList.remove("focus"),this.parentNode.classList.contains("active")&&this.parentNode.classList.remove("active")},!0);for(i=0;i<navLinks.length;i++)navLinks[i].addEventListener("click",function(){this.parentNode.classList.add("active")},!0);var search=document.getElementById("search-form");toggleSearch=document.getElementById("search-toggle"),toggleSearch.addEventListener("focus",function(e){"search-form active"===search.className?search.className="search-form visually-hidden":search.className="search-form active"},!0),toggleSearch.addEventListener("focusout",function(e){"search-form active"===search.className?search.className="search-form visually-hidden":search.className="search-form active"},!0),search.addEventListener("focus",function(e){search.className="search-form active"},!0),search.addEventListener("focusout",function(e){search.className="search-form visually-hidden"},!0);var login=document.getElementById("login-form");toggleLogin=document.getElementById("login-toggle"),toggleLogin.addEventListener("focus",function(e){"login-form flex-column active"===login.className?login.className="login-form flex-column visually-hidden":login.className="login-form flex-column active"},!0),toggleLogin.addEventListener("focusout",function(e){"login-form flex-column active"===login.className?login.className="login-form flex-column visually-hidden":login.className="login-form flex-column active"},!0),login.addEventListener("focus",function(e){login.className="login-form flex-column active"},!0),login.addEventListener("focusout",function(e){login.className="login-form flex-column visually-hidden"},!0);var cart=document.getElementById("cart-form"),toggleCart=document.getElementById("cart-toggle");null!==cart&&toggleCart.addEventListener("focus",function(e){"cart-form flex-column active"===cart.className?cart.className="cart-form flex-column visually-hidden":cart.className="cart-form flex-column active"},!0),null!==cart&&toggleCart.addEventListener("focusout",function(e){"cart-form flex-column active"===cart.className?cart.className="cart-form flex-column visually-hidden":"cart-form flex-column active"===cart.className&&(cart.className="cart-form flex-column active")},!0),null!==cart&&cart.addEventListener("focus",function(e){cart.className="cart-form flex-column active"},!0),null!==cart&&cart.addEventListener("focusout",function(e){cart.className="cart-form flex-column visually-hidden"},!0);var navItems=document.getElementsByClassName("slide-nav"),slides=document.getElementsByClassName("product-slide"),colors=["#849d8f","#8996a6","#9d8b84"],wrapper=document.getElementById("wrapper"),currentSlide=0;function getCurrent(){for(var e=0;e<navItems.length;e++)"slide-nav slide-nav-current"===navItems[e].className&&(currentSlide=e);return currentSlide}function slideChange(){for(var e=getCurrent(),t=0;t<slides.length;t++)slides[t].style.opacity=0;slides[e].style.opacity=1,wrapper.style.backgroundColor=colors[e]}for(i=0;i<navItems.length;i++)navItems[i].addEventListener("click",function(e){navItems[currentSlide].className="slide-nav",e.target.className="slide-nav slide-nav-current",slideChange()},!0);var form=document.getElementById("callback-form"),borderTop=document.getElementById("form-border-top"),borderLeft=document.getElementById("form-border-left"),borderBottom=document.getElementById("form-border-bottom"),borderRight=document.getElementById("form-border-right");function animate(a){var r=performance.now();requestAnimationFrame(function e(t){var o=(t-r)/a.duration;1<o&&(o=1);var n=a.timing(o);a.draw(n),o<1&&requestAnimationFrame(e)})}if(null!==form){var email=document.querySelector(".callback-form [name=email]");form.addEventListener("submit",function(e){email.value?borderTop.classList.contains("form-border-invalid")&&(borderTop.classList.remove("form-border-invalid"),borderLeft.classList.remove("form-border-invalid"),borderBottom.classList.remove("form-border-invalid"),borderRight.classList.remove("form-border-invalid"),borderTop.classList.add("form-border"),borderLeft.classList.add("form-border"),borderBottom.classList.add("form-border"),borderRight.classList.add("form-border")):(e.preventDefault(),email.focus(),animate({duration:1500,timing:function(e){return e},draw:function(e){borderTop.classList.add("form-border-invalid"),borderLeft.classList.add("form-border-invalid"),borderBottom.classList.add("form-border-invalid"),borderRight.classList.add("form-border-invalid"),borderTop.classList.remove("form-border"),borderLeft.classList.remove("form-border"),borderBottom.classList.remove("form-border"),borderRight.classList.remove("form-border"),borderTop.style.width=95*e+"%",borderLeft.style.height=95*e+"%",borderBottom.style.width=95*e+"%",borderRight.style.height=95*e+"%",borderTop.style.opacity=1-e,borderLeft.style.opacity=1-e,borderBottom.style.opacity=1-e,borderRight.style.opacity=1-e}}))})}var openModalButton=document.getElementById("modal-opener"),callbackForm=document.getElementById("modal-callback"),closeModalButton=document.getElementById("close-modal");function showModal(e){e.classList.toggle("visually-hidden"),email.focus(),animate({duration:1500,timing:function(e){return e},draw:function(e){borderTop.style.width=95*e+"%",borderLeft.style.height=95*e+"%",borderBottom.style.width=95*e+"%",borderRight.style.height=95*e+"%",borderTop.style.opacity=1-e,borderLeft.style.opacity=1-e,borderBottom.style.opacity=1-e,borderRight.style.opacity=1-e}})}function closeModal(e){e.classList.toggle("visually-hidden")}null!==openModalButton&&null!==callbackForm&&null!==closeModalButton&&(openModalButton.addEventListener("click",function(){showModal(callbackForm)},!0),closeModalButton.addEventListener("click",function(){closeModal(callbackForm)},!0),window.addEventListener("keyup",function(e){27===e.which&&closeModal(callbackForm)}));var ymaps,firstRange=document.querySelector("[type=range].first"),secondRange=document.querySelector("[type=range].second");if(null!==firstRange&&null!==secondRange){function ready(){document.documentElement.classList.add("js"),firstRange.style.setProperty("--val",+firstRange.value),secondRange.style.setProperty("--val",+secondRange.value)}firstRange.addEventListener("input",function(){firstRange.style.setProperty("--val",+firstRange.value)},!1),secondRange.addEventListener("input",function(){secondRange.style.setProperty("--val",+secondRange.value)},!1),document.addEventListener("DOMContentLoaded",ready)}ymaps&&ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.93889934199378,30.326401896850584],zoom:17},{searchControlProvider:"yandex#search"}),t=new ymaps.Placemark([59.93863921358829,30.323044581586483],{balloonContent:"«Глэйси» на карте"},{iconLayout:"default#image",iconImageHref:"img/map-pin.png",iconImageSize:[218,142],iconImageOffset:[-40,-140]});e.geoObjects.add(t)});