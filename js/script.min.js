function showElement(e){e.classList.toggle("visually-hidden"),e.classList.toggle("active")}function hideElement(e){e.classList.toggle("active"),e.classList.toggle("visually-hidden")}function isActive(e){return!!e.classList.contains("active")}var menu=document.getElementById("dropdown-menu"),toggleMenu=document.getElementById("dropdown-menu-toggle");toggleMenu.addEventListener("focus",function(){isActive(menu)?hideElement(menu):showElement(menu)},!0),toggleMenu.addEventListener("focusout",function(){isActive(menu)?hideElement(menu):showElement(menu)},!0),menu.addEventListener("focus",function(){showElement(this)},!0),menu.addEventListener("focusout",function(){hideElement(this)},!0);var search=document.getElementById("search-form");toggleSearch=document.getElementById("search-toggle"),toggleSearch.addEventListener("focus",function(e){isActive(search)?hideElement(search):showElement(search)},!0),toggleSearch.addEventListener("focusout",function(e){isActive(search)?hideElement(search):showElement(search)},!0),search.addEventListener("focus",function(e){showElement(search)},!0),search.addEventListener("focusout",function(e){hideElement(search)},!0);var login=document.getElementById("login-form");toggleLogin=document.getElementById("login-toggle"),toggleLogin.addEventListener("focus",function(e){isActive(login)?hideElement(login):showElement(login)},!0),toggleLogin.addEventListener("focusout",function(e){isActive(login)?hideElement(login):showElement(login)},!0),login.addEventListener("focus",function(e){showElement(login)},!0),login.addEventListener("focusout",function(e){hideElement(login)},!0);var cart=document.getElementById("cart-form"),toggleCart=document.getElementById("cart-toggle");null!==cart&&(toggleCart.addEventListener("focus",function(e){isActive(cart)?hideElement(cart):showElement(cart)},!0),toggleCart.addEventListener("focusout",function(e){isActive(cart)?hideElement(cart):showElement(cart)},!0),cart.addEventListener("focus",function(e){showElement(cart)},!0),cart.addEventListener("focusout",function(e){hideElement(cart)},!0));for(var navLinks=document.getElementsByClassName("site-navigation-link"),linksBg=document.getElementsByClassName("link-bg"),i=0;i<navLinks.length;i++)navLinks[i].addEventListener("focus",function(){this.parentNode.classList.add("focus")},!0);for(i=0;i<navLinks.length;i++)navLinks[i].addEventListener("focusout",function(){this.parentNode.classList.remove("focus"),isActive(this.parentNode)&&this.parentNode.classList.remove("active")},!0);for(i=0;i<navLinks.length;i++)navLinks[i].addEventListener("click",function(){this.parentNode.classList.add("active")},!0);var navItems=document.getElementsByClassName("slide-nav"),slides=document.getElementsByClassName("product-slide"),colors=["#849d8f","#8996a6","#9d8b84"],wrapper=document.getElementById("wrapper"),currentSlide=0;function getCurrent(){for(var e=0;e<navItems.length;e++)navItems[e].classList.contains("slide-nav-current")&&(currentSlide=e);return currentSlide}function slideChange(){for(var e=getCurrent(),t=0;t<slides.length;t++)slides[t].style.opacity=0;slides[e].style.opacity=1,wrapper.style.backgroundColor=colors[e]}for(i=0;i<navItems.length;i++)navItems[i].addEventListener("click",function(e){navItems[currentSlide].classList.remove("slide-nav-current"),e.target.classList.add("slide-nav-current"),slideChange()},!0);var form=document.getElementById("callback-form"),inputs=document.querySelectorAll(".callback-form .form-input");function removeError(e){for(var t=0;t<e.length;t++)e[t].classList.contains("on-error")&&e[t].classList.remove("on-error")}null!==form&&form.addEventListener("submit",function(e){var t=0;removeError(inputs),e.preventDefault();for(var n=0;n<inputs.length;n++)inputs[n].value||(inputs[n].classList.add("on-error"),t++);t||form.submit()});var openModalButton=document.getElementById("modal-opener"),callbackForm=document.getElementById("modal-callback"),closeModalButton=document.getElementById("close-modal");null!==openModalButton&&null!==callbackForm&&null!==closeModalButton&&(openModalButton.addEventListener("click",function(){showModal(callbackForm)},!0),closeModalButton.addEventListener("click",function(){closeModal(callbackForm)},!0),window.addEventListener("keyup",function(e){27===e.which&&closeModal(callbackForm)}));var borders=document.querySelectorAll(".form-border");function animate(s){var a=performance.now();requestAnimationFrame(function e(t){var n=(t-a)/s.duration;1<n&&(n=1);var o=s.timing(n);s.draw(o),n<1&&requestAnimationFrame(e)})}function showModal(e){e.classList.toggle("visually-hidden"),removeError(inputs),document.querySelector(".callback-form [name=username]").focus(),animate({duration:1500,timing:function(e){return e},draw:function(e){for(var t=0;t<borders.length;t++)t%2==0?borders[t].style.width=95*e+"%":borders[t].style.height=95*e+"%",borders[t].style.opacity=1-e}})}function closeModal(e){e.classList.toggle("visually-hidden")}var ymaps,firstRange=document.querySelector("[type=range].first"),secondRange=document.querySelector("[type=range].second");if(null!==firstRange&&null!==secondRange){function ready(){document.documentElement.classList.add("js"),firstRange.style.setProperty("--val",+firstRange.value),secondRange.style.setProperty("--val",+secondRange.value)}firstRange.addEventListener("input",function(){firstRange.style.setProperty("--val",+firstRange.value)},!1),secondRange.addEventListener("input",function(){secondRange.style.setProperty("--val",+secondRange.value)},!1),document.addEventListener("DOMContentLoaded",ready)}ymaps&&ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.93889934199378,30.326401896850584],zoom:17},{searchControlProvider:"yandex#search"}),t=new ymaps.Placemark([59.93863921358829,30.323044581586483],{balloonContent:"«Глэйси» на карте"},{iconLayout:"default#image",iconImageHref:"img/map-pin.png",iconImageSize:[218,142],iconImageOffset:[-40,-140]});e.geoObjects.add(t)});